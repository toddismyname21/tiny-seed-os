<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tiny Seed Farm - Sales Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* ========================================
           TINY SEED SALES DASHBOARD - CSS
           ======================================== */

        :root {
            /* Brand Colors */
            --primary: #FF8C00;
            --primary-dark: #e67e00;
            --primary-light: #ffaa33;

            /* Status Colors */
            --success: #22c55e;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #3b82f6;

            /* Neutral Colors */
            --bg-dark: #0f172a;
            --bg-card: #1e293b;
            --bg-elevated: #334155;
            --bg-input: #1e293b;

            /* Text Colors */
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;

            /* Borders */
            --border-color: #334155;
            --border-light: #475569;

            /* Shadows */
            --shadow-sm: 0 1px 2px rgba(0,0,0,0.3);
            --shadow-md: 0 4px 6px rgba(0,0,0,0.4);
            --shadow-lg: 0 10px 15px rgba(0,0,0,0.5);

            /* Spacing */
            --sidebar-width: 260px;
            --header-height: 64px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* ========================================
           LAYOUT
           ======================================== */

        .app-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--bg-card);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            position: fixed;
            height: 100vh;
            z-index: 100;
        }

        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .logo-text {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .logo-subtitle {
            font-size: 11px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Navigation */
        .nav-section {
            padding: 16px 12px;
            flex: 1;
            overflow-y: auto;
        }

        .nav-label {
            font-size: 11px;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
            padding: 8px 12px;
            margin-top: 8px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }

        .nav-item:hover {
            background: var(--bg-elevated);
            color: var(--text-primary);
        }

        .nav-item.active {
            background: var(--primary);
            color: white;
        }

        .nav-item .icon {
            width: 20px;
            text-align: center;
        }

        .nav-item .badge {
            margin-left: auto;
            background: var(--danger);
            color: white;
            font-size: 11px;
            font-weight: 600;
            padding: 2px 8px;
            border-radius: 10px;
        }

        /* Main Content */
        .main-content {
            margin-left: var(--sidebar-width);
            flex: 1;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* Header */
        .header {
            height: var(--header-height);
            background: var(--bg-card);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 24px;
            position: sticky;
            top: 0;
            z-index: 50;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .page-title {
            font-size: 20px;
            font-weight: 600;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .search-box {
            display: flex;
            align-items: center;
            background: var(--bg-elevated);
            border-radius: 8px;
            padding: 8px 16px;
            gap: 8px;
            width: 300px;
        }

        .search-box input {
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 14px;
            width: 100%;
            outline: none;
        }

        .search-box input::placeholder {
            color: var(--text-muted);
        }

        .header-btn {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background: var(--bg-elevated);
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            position: relative;
        }

        .header-btn:hover {
            background: var(--border-light);
            color: var(--text-primary);
        }

        .header-btn .notification-dot {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 8px;
            height: 8px;
            background: var(--danger);
            border-radius: 50%;
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            padding: 6px 12px;
            border-radius: 8px;
            transition: all 0.2s;
        }

        .user-menu:hover {
            background: var(--bg-elevated);
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
        }

        .user-info {
            text-align: left;
        }

        .user-name {
            font-size: 14px;
            font-weight: 500;
        }

        .user-role {
            font-size: 12px;
            color: var(--text-secondary);
        }

        /* Page Content */
        .page-content {
            flex: 1;
            padding: 24px;
            overflow-y: auto;
        }

        /* Tab Content */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* ========================================
           DASHBOARD TAB
           ======================================== */

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 24px;
        }

        .stat-card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--border-color);
        }

        .stat-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .stat-label {
            font-size: 13px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .stat-icon {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .stat-icon.blue { background: rgba(59, 130, 246, 0.2); color: #3b82f6; }
        .stat-icon.green { background: rgba(34, 197, 94, 0.2); color: #22c55e; }
        .stat-icon.orange { background: rgba(255, 140, 0, 0.2); color: #FF8C00; }
        .stat-icon.purple { background: rgba(139, 92, 246, 0.2); color: #8b5cf6; }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .stat-change {
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .stat-change.positive { color: var(--success); }
        .stat-change.negative { color: var(--danger); }

        /* Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
        }

        .card {
            background: var(--bg-card);
            border-radius: 12px;
            border: 1px solid var(--border-color);
            overflow: hidden;
        }

        .card-header {
            padding: 16px 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .card-title {
            font-size: 16px;
            font-weight: 600;
        }

        .card-body {
            padding: 20px;
        }

        .card-action {
            font-size: 13px;
            color: var(--primary);
            cursor: pointer;
            font-weight: 500;
        }

        .card-action:hover {
            text-decoration: underline;
        }

        /* Orders Table */
        .orders-table {
            width: 100%;
            border-collapse: collapse;
        }

        .orders-table th,
        .orders-table td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .orders-table th {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .orders-table tr:hover {
            background: var(--bg-elevated);
        }

        .order-id {
            font-weight: 600;
            color: var(--primary);
        }

        .customer-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .customer-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--bg-elevated);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 13px;
            color: var(--text-secondary);
        }

        .customer-name {
            font-weight: 500;
        }

        .customer-email {
            font-size: 12px;
            color: var(--text-secondary);
        }

        /* Status Badges */
        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-badge.pending {
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
        }

        .status-badge.confirmed {
            background: rgba(59, 130, 246, 0.2);
            color: #3b82f6;
        }

        .status-badge.picking {
            background: rgba(139, 92, 246, 0.2);
            color: #8b5cf6;
        }

        .status-badge.packed {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
        }

        .status-badge.delivered {
            background: rgba(34, 197, 94, 0.3);
            color: #22c55e;
        }

        .status-badge.cancelled {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        /* Alerts List */
        .alert-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            background: var(--bg-elevated);
        }

        .alert-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            flex-shrink: 0;
        }

        .alert-icon.warning {
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
        }

        .alert-icon.danger {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        .alert-icon.info {
            background: rgba(59, 130, 246, 0.2);
            color: #3b82f6;
        }

        .alert-content {
            flex: 1;
        }

        .alert-title {
            font-size: 13px;
            font-weight: 500;
            margin-bottom: 2px;
        }

        .alert-desc {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .alert-time {
            font-size: 11px;
            color: var(--text-muted);
        }

        /* ========================================
           ORDERS TAB
           ======================================== */

        .tab-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .tab-title {
            font-size: 24px;
            font-weight: 700;
        }

        .tab-actions {
            display: flex;
            gap: 12px;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
        }

        .btn-secondary {
            background: var(--bg-elevated);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        .btn-secondary:hover {
            background: var(--border-light);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        /* Filters */
        .filters-bar {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .filter-label {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .filter-select,
        .filter-input {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 8px 12px;
            color: var(--text-primary);
            font-size: 14px;
            outline: none;
        }

        .filter-select:focus,
        .filter-input:focus {
            border-color: var(--primary);
        }

        .filter-tabs {
            display: flex;
            background: var(--bg-card);
            border-radius: 8px;
            padding: 4px;
            border: 1px solid var(--border-color);
        }

        .filter-tab {
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            color: var(--text-secondary);
            transition: all 0.2s;
        }

        .filter-tab:hover {
            color: var(--text-primary);
        }

        .filter-tab.active {
            background: var(--primary);
            color: white;
        }

        /* Full Width Table */
        .full-table-wrapper {
            background: var(--bg-card);
            border-radius: 12px;
            border: 1px solid var(--border-color);
            overflow: hidden;
        }

        .full-table {
            width: 100%;
            border-collapse: collapse;
        }

        .full-table th {
            background: var(--bg-elevated);
            padding: 14px 16px;
            text-align: left;
            font-size: 12px;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            white-space: nowrap;
        }

        .full-table td {
            padding: 14px 16px;
            border-bottom: 1px solid var(--border-color);
        }

        .full-table tbody tr:hover {
            background: var(--bg-elevated);
        }

        .full-table tbody tr:last-child td {
            border-bottom: none;
        }

        /* Action Buttons */
        .action-btns {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            width: 32px;
            height: 32px;
            border-radius: 6px;
            background: var(--bg-elevated);
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .action-btn:hover {
            background: var(--border-light);
            color: var(--text-primary);
        }

        .action-btn.edit:hover { color: var(--info); }
        .action-btn.delete:hover { color: var(--danger); }

        /* ========================================
           CUSTOMERS TAB
           ======================================== */

        .customers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
        }

        .customer-card {
            background: var(--bg-card);
            border-radius: 12px;
            border: 1px solid var(--border-color);
            padding: 20px;
            transition: all 0.2s;
        }

        .customer-card:hover {
            border-color: var(--primary);
            box-shadow: 0 0 0 1px var(--primary);
        }

        .customer-card-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 16px;
        }

        .customer-card-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 18px;
        }

        .customer-card-info h3 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .customer-type-badge {
            font-size: 11px;
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: 500;
        }

        .customer-type-badge.csa {
            background: rgba(139, 92, 246, 0.2);
            color: #8b5cf6;
        }

        .customer-type-badge.wholesale {
            background: rgba(59, 130, 246, 0.2);
            color: #3b82f6;
        }

        .customer-type-badge.retail {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
        }

        .customer-type-badge.restaurant {
            background: rgba(255, 140, 0, 0.2);
            color: #FF8C00;
        }

        .customer-card-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 16px;
            padding: 12px;
            background: var(--bg-elevated);
            border-radius: 8px;
        }

        .customer-stat {
            text-align: center;
        }

        .customer-stat-value {
            font-size: 18px;
            font-weight: 700;
        }

        .customer-stat-label {
            font-size: 11px;
            color: var(--text-secondary);
        }

        .customer-card-contact {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .customer-card-contact p {
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .customer-card-actions {
            display: flex;
            gap: 8px;
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid var(--border-color);
        }

        .customer-card-actions .btn {
            flex: 1;
            justify-content: center;
            padding: 8px 12px;
            font-size: 13px;
        }

        /* ========================================
           CSA TAB
           ======================================== */

        .csa-overview {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 24px;
        }

        .csa-stat-card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--border-color);
            text-align: center;
        }

        .csa-stat-value {
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .csa-stat-label {
            font-size: 13px;
            color: var(--text-secondary);
        }

        /* Member Table */
        .member-status {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .status-dot.active { background: var(--success); }
        .status-dot.paused { background: var(--warning); }
        .status-dot.cancelled { background: var(--danger); }
        .status-dot.expired { background: var(--text-muted); }

        /* ========================================
           PICK & PACK TAB
           ======================================== */

        .pick-pack-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 24px;
            padding: 20px;
            background: var(--bg-card);
            border-radius: 12px;
            border: 1px solid var(--border-color);
        }

        .pick-date-selector {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .pick-date-selector label {
            font-weight: 500;
        }

        .pick-stats {
            display: flex;
            gap: 32px;
        }

        .pick-stat {
            text-align: center;
        }

        .pick-stat-value {
            font-size: 24px;
            font-weight: 700;
        }

        .pick-stat-label {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .pick-list-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .pick-list-section {
            background: var(--bg-card);
            border-radius: 12px;
            border: 1px solid var(--border-color);
        }

        .pick-list-header {
            padding: 16px 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .pick-list-title {
            font-size: 16px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .pick-item {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            border-bottom: 1px solid var(--border-color);
            gap: 12px;
        }

        .pick-item:last-child {
            border-bottom: none;
        }

        .pick-checkbox {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            border: 2px solid var(--border-light);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .pick-checkbox.checked {
            background: var(--success);
            border-color: var(--success);
        }

        .pick-item-info {
            flex: 1;
        }

        .pick-item-name {
            font-weight: 500;
        }

        .pick-item-location {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .pick-item-qty {
            font-size: 18px;
            font-weight: 700;
            color: var(--primary);
        }

        /* ========================================
           CAMPAIGNS TAB
           ======================================== */

        .campaigns-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
            gap: 20px;
        }

        .campaign-card {
            background: var(--bg-card);
            border-radius: 12px;
            border: 1px solid var(--border-color);
            overflow: hidden;
        }

        .campaign-card-header {
            padding: 16px 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .campaign-type {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            font-weight: 500;
        }

        .campaign-type.sms {
            color: var(--success);
        }

        .campaign-type.email {
            color: var(--info);
        }

        .campaign-card-body {
            padding: 20px;
        }

        .campaign-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .campaign-preview {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.5;
            margin-bottom: 16px;
        }

        .campaign-stats {
            display: flex;
            gap: 24px;
        }

        .campaign-stat {
            text-align: center;
        }

        .campaign-stat-value {
            font-size: 20px;
            font-weight: 700;
        }

        .campaign-stat-label {
            font-size: 11px;
            color: var(--text-secondary);
        }

        /* Quick SMS Form */
        .quick-sms-card {
            background: var(--bg-card);
            border-radius: 12px;
            border: 1px solid var(--border-color);
            padding: 24px;
            margin-bottom: 24px;
        }

        .quick-sms-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-label {
            display: block;
            font-size: 13px;
            font-weight: 500;
            margin-bottom: 8px;
            color: var(--text-secondary);
        }

        .form-input,
        .form-select,
        .form-textarea {
            width: 100%;
            background: var(--bg-elevated);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 12px 16px;
            color: var(--text-primary);
            font-size: 14px;
            outline: none;
            transition: all 0.2s;
        }

        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            border-color: var(--primary);
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }

        .char-count {
            font-size: 12px;
            color: var(--text-muted);
            text-align: right;
            margin-top: 4px;
        }

        .recipient-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 8px;
        }

        .recipient-tag {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            background: var(--bg-elevated);
            border-radius: 20px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid var(--border-color);
        }

        .recipient-tag:hover {
            border-color: var(--primary);
        }

        .recipient-tag.selected {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }

        /* ========================================
           REPORTS TAB
           ======================================== */

        .reports-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 24px;
        }

        .date-range-picker {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .reports-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .report-card {
            background: var(--bg-card);
            border-radius: 12px;
            border: 1px solid var(--border-color);
            padding: 20px;
        }

        .report-card.full-width {
            grid-column: span 2;
        }

        .report-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 16px;
        }

        /* Chart placeholder */
        .chart-placeholder {
            height: 250px;
            background: var(--bg-elevated);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
        }

        /* Top Items List */
        .top-items-list {
            list-style: none;
        }

        .top-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .top-item:last-child {
            border-bottom: none;
        }

        .top-item-rank {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: var(--bg-elevated);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 600;
            margin-right: 12px;
        }

        .top-item-info {
            flex: 1;
        }

        .top-item-name {
            font-weight: 500;
        }

        .top-item-detail {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .top-item-value {
            font-weight: 600;
        }

        /* ========================================
           MODALS
           ======================================== */

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: var(--bg-card);
            border-radius: 16px;
            width: 100%;
            max-width: 600px;
            max-height: 90vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .modal.large {
            max-width: 900px;
        }

        .modal-header {
            padding: 20px 24px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .modal-title {
            font-size: 18px;
            font-weight: 600;
        }

        .modal-close {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            background: var(--bg-elevated);
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .modal-close:hover {
            background: var(--border-light);
            color: var(--text-primary);
        }

        .modal-body {
            padding: 24px;
            overflow-y: auto;
            flex: 1;
        }

        .modal-footer {
            padding: 16px 24px;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }

        /* Form Grid */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }

        .form-grid .form-group.full-width {
            grid-column: span 2;
        }

        /* ========================================
           LOADING & EMPTY STATES
           ======================================== */

        .loading-spinner {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 60px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--border-color);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
        }

        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 16px;
            opacity: 0.5;
        }

        .empty-state-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .empty-state-desc {
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        /* ========================================
           TOAST NOTIFICATIONS
           ======================================== */

        .toast-container {
            position: fixed;
            bottom: 24px;
            right: 24px;
            z-index: 2000;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .toast {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px 20px;
            background: var(--bg-card);
            border-radius: 12px;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-color);
            min-width: 300px;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .toast.success { border-left: 4px solid var(--success); }
        .toast.error { border-left: 4px solid var(--danger); }
        .toast.warning { border-left: 4px solid var(--warning); }
        .toast.info { border-left: 4px solid var(--info); }

        .toast-icon {
            font-size: 20px;
        }

        .toast.success .toast-icon { color: var(--success); }
        .toast.error .toast-icon { color: var(--danger); }
        .toast.warning .toast-icon { color: var(--warning); }
        .toast.info .toast-icon { color: var(--info); }

        .toast-message {
            flex: 1;
            font-size: 14px;
        }

        .toast-close {
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            padding: 4px;
        }

        /* ========================================
           RESPONSIVE
           ======================================== */

        @media (max-width: 1200px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .pick-list-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s;
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .form-grid .form-group.full-width {
                grid-column: span 1;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon">üå±</div>
                    <div>
                        <div class="logo-text">Tiny Seed</div>
                        <div class="logo-subtitle">Sales Dashboard</div>
                    </div>
                </div>
            </div>

            <nav class="nav-section">
                <div class="nav-label">Overview</div>
                <div class="nav-item active" data-tab="dashboard">
                    <span class="icon">üìä</span>
                    <span>Dashboard</span>
                </div>

                <div class="nav-label">Sales</div>
                <div class="nav-item" data-tab="orders">
                    <span class="icon">üì¶</span>
                    <span>Orders</span>
                    <span class="badge" id="pendingOrdersBadge">0</span>
                </div>
                <div class="nav-item" data-tab="customers">
                    <span class="icon">üë•</span>
                    <span>Customers</span>
                </div>
                <div class="nav-item" data-tab="inventory">
                    <span class="icon">ü•¨</span>
                    <span>Inventory</span>
                </div>

                <div class="nav-label">Programs</div>
                <div class="nav-item" data-tab="csa">
                    <span class="icon">üß∫</span>
                    <span>CSA Members</span>
                </div>
                <div class="nav-item" data-tab="wholesale">
                    <span class="icon">üè™</span>
                    <span>Wholesale</span>
                </div>

                <div class="nav-label">Operations</div>
                <div class="nav-item" data-tab="pickpack">
                    <span class="icon">üìã</span>
                    <span>Pick & Pack</span>
                </div>
                <div class="nav-item" data-tab="campaigns">
                    <span class="icon">üì±</span>
                    <span>Campaigns</span>
                </div>

                <div class="nav-label">Insights</div>
                <div class="nav-item" data-tab="reports">
                    <span class="icon">üìà</span>
                    <span>Reports</span>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <button class="header-btn mobile-menu-btn" onclick="toggleSidebar()">‚ò∞</button>
                    <h1 class="page-title" id="pageTitle">Dashboard</h1>
                </div>
                <div class="header-right">
                    <div class="search-box">
                        <span>üîç</span>
                        <input type="text" placeholder="Search orders, customers..." id="globalSearch">
                    </div>
                    <button class="header-btn" onclick="refreshData()">üîÑ</button>
                    <button class="header-btn">
                        <span>üîî</span>
                        <span class="notification-dot"></span>
                    </button>
                    <div class="user-menu">
                        <div class="user-avatar">TS</div>
                        <div class="user-info">
                            <div class="user-name">Todd</div>
                            <div class="user-role">Farm Owner</div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Page Content -->
            <div class="page-content">
                <!-- Dashboard Tab -->
                <div class="tab-content active" id="tab-dashboard">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-label">Today's Orders</span>
                                <div class="stat-icon blue">üì¶</div>
                            </div>
                            <div class="stat-value" id="todayOrders">--</div>
                            <div class="stat-change positive">
                                <span>‚Üë</span>
                                <span>12% from yesterday</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-label">Today's Revenue</span>
                                <div class="stat-icon green">üí∞</div>
                            </div>
                            <div class="stat-value" id="todayRevenue">--</div>
                            <div class="stat-change positive">
                                <span>‚Üë</span>
                                <span>8% from yesterday</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-label">Pending Deliveries</span>
                                <div class="stat-icon orange">üöö</div>
                            </div>
                            <div class="stat-value" id="pendingDeliveries">--</div>
                            <div class="stat-change">
                                <span>Next delivery in 2h</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-label">Active CSA Members</span>
                                <div class="stat-icon purple">üë•</div>
                            </div>
                            <div class="stat-value" id="activeCSA">--</div>
                            <div class="stat-change positive">
                                <span>‚Üë</span>
                                <span>3 new this week</span>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-grid">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Recent Orders</h3>
                                <span class="card-action" onclick="switchTab('orders')">View All ‚Üí</span>
                            </div>
                            <div class="card-body" style="padding: 0;">
                                <table class="orders-table">
                                    <thead>
                                        <tr>
                                            <th>Order</th>
                                            <th>Customer</th>
                                            <th>Total</th>
                                            <th>Status</th>
                                        </tr>
                                    </thead>
                                    <tbody id="recentOrdersTable">
                                        <tr>
                                            <td colspan="4">
                                                <div class="loading-spinner">
                                                    <div class="spinner"></div>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Alerts & Notifications</h3>
                            </div>
                            <div class="card-body" id="alertsList">
                                <div class="alert-item">
                                    <div class="alert-icon warning">‚ö†Ô∏è</div>
                                    <div class="alert-content">
                                        <div class="alert-title">Low Stock Alert</div>
                                        <div class="alert-desc">Basil is running low (5 bunches remaining)</div>
                                    </div>
                                    <div class="alert-time">10m ago</div>
                                </div>
                                <div class="alert-item">
                                    <div class="alert-icon info">üìã</div>
                                    <div class="alert-content">
                                        <div class="alert-title">Tuesday Orders Closing</div>
                                        <div class="alert-desc">Order deadline in 4 hours</div>
                                    </div>
                                    <div class="alert-time">1h ago</div>
                                </div>
                                <div class="alert-item">
                                    <div class="alert-icon danger">üî¥</div>
                                    <div class="alert-content">
                                        <div class="alert-title">Payment Failed</div>
                                        <div class="alert-desc">Green Valley Restaurant - Invoice #1234</div>
                                    </div>
                                    <div class="alert-time">3h ago</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Orders Tab -->
                <div class="tab-content" id="tab-orders">
                    <div class="tab-header">
                        <h2 class="tab-title">Orders</h2>
                        <div class="tab-actions">
                            <button class="btn btn-secondary" onclick="exportOrders()">
                                <span>üì•</span> Export
                            </button>
                            <button class="btn btn-primary" onclick="openNewOrderModal()">
                                <span>+</span> New Order
                            </button>
                        </div>
                    </div>

                    <div class="filters-bar">
                        <div class="filter-tabs">
                            <div class="filter-tab active" data-filter="all">All</div>
                            <div class="filter-tab" data-filter="pending">Pending</div>
                            <div class="filter-tab" data-filter="confirmed">Confirmed</div>
                            <div class="filter-tab" data-filter="delivered">Delivered</div>
                        </div>
                        <div class="filter-group">
                            <label class="filter-label">Date:</label>
                            <input type="date" class="filter-input" id="filterDate">
                        </div>
                        <div class="filter-group">
                            <label class="filter-label">Customer Type:</label>
                            <select class="filter-select" id="filterCustomerType">
                                <option value="">All Types</option>
                                <option value="csa">CSA</option>
                                <option value="wholesale">Wholesale</option>
                                <option value="retail">Retail</option>
                                <option value="restaurant">Restaurant</option>
                            </select>
                        </div>
                    </div>

                    <div class="full-table-wrapper">
                        <table class="full-table">
                            <thead>
                                <tr>
                                    <th>Order ID</th>
                                    <th>Customer</th>
                                    <th>Items</th>
                                    <th>Total</th>
                                    <th>Delivery Date</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="ordersTableBody">
                                <tr>
                                    <td colspan="7">
                                        <div class="loading-spinner">
                                            <div class="spinner"></div>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Customers Tab -->
                <div class="tab-content" id="tab-customers">
                    <div class="tab-header">
                        <h2 class="tab-title">Customers</h2>
                        <div class="tab-actions">
                            <button class="btn btn-secondary" onclick="exportCustomers()">
                                <span>üì•</span> Export
                            </button>
                            <button class="btn btn-primary" onclick="openNewCustomerModal()">
                                <span>+</span> Add Customer
                            </button>
                        </div>
                    </div>

                    <div class="filters-bar">
                        <div class="filter-tabs">
                            <div class="filter-tab active" data-filter="all">All</div>
                            <div class="filter-tab" data-filter="csa">CSA</div>
                            <div class="filter-tab" data-filter="wholesale">Wholesale</div>
                            <div class="filter-tab" data-filter="retail">Retail</div>
                            <div class="filter-tab" data-filter="restaurant">Restaurant</div>
                        </div>
                        <div class="search-box" style="margin-left: auto;">
                            <span>üîç</span>
                            <input type="text" placeholder="Search customers..." id="customerSearch">
                        </div>
                    </div>

                    <div class="customers-grid" id="customersGrid">
                        <div class="loading-spinner">
                            <div class="spinner"></div>
                        </div>
                    </div>
                </div>

                <!-- Inventory Tab -->
                <div class="tab-content" id="tab-inventory">
                    <div class="tab-header">
                        <h2 class="tab-title">Inventory</h2>
                        <div class="tab-actions">
                            <button class="btn btn-secondary" onclick="syncFromHarvest()">
                                <span>üîÑ</span> Sync from Harvest
                            </button>
                            <button class="btn btn-primary" onclick="openAddInventoryModal()">
                                <span>+</span> Add Item
                            </button>
                        </div>
                    </div>

                    <div class="filters-bar">
                        <div class="filter-group">
                            <label class="filter-label">Department:</label>
                            <select class="filter-select" id="filterDepartment">
                                <option value="">All</option>
                                <option value="veg">Vegetables</option>
                                <option value="floral">Floral</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label class="filter-label">Stock Status:</label>
                            <select class="filter-select" id="filterStock">
                                <option value="">All</option>
                                <option value="instock">In Stock</option>
                                <option value="low">Low Stock</option>
                                <option value="out">Out of Stock</option>
                            </select>
                        </div>
                    </div>

                    <div class="full-table-wrapper">
                        <table class="full-table">
                            <thead>
                                <tr>
                                    <th>Product</th>
                                    <th>Variety</th>
                                    <th>Unit</th>
                                    <th>Available</th>
                                    <th>Reserved</th>
                                    <th>Retail Price</th>
                                    <th>Wholesale Price</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="inventoryTableBody">
                                <tr>
                                    <td colspan="8">
                                        <div class="loading-spinner">
                                            <div class="spinner"></div>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- CSA Tab -->
                <div class="tab-content" id="tab-csa">
                    <div class="tab-header">
                        <h2 class="tab-title">CSA Members</h2>
                        <div class="tab-actions">
                            <button class="btn btn-secondary" onclick="generateWeeklyBoxes()">
                                <span>üì¶</span> Generate Weekly Boxes
                            </button>
                            <button class="btn btn-primary" onclick="openNewMemberModal()">
                                <span>+</span> Add Member
                            </button>
                        </div>
                    </div>

                    <div class="csa-overview">
                        <div class="csa-stat-card">
                            <div class="csa-stat-value" id="csaActive" style="color: var(--success);">--</div>
                            <div class="csa-stat-label">Active Members</div>
                        </div>
                        <div class="csa-stat-card">
                            <div class="csa-stat-value" id="csaPaused" style="color: var(--warning);">--</div>
                            <div class="csa-stat-label">On Vacation Hold</div>
                        </div>
                        <div class="csa-stat-card">
                            <div class="csa-stat-value" id="csaRevenue" style="color: var(--info);">--</div>
                            <div class="csa-stat-label">This Week Revenue</div>
                        </div>
                        <div class="csa-stat-card">
                            <div class="csa-stat-value" id="csaRenewal" style="color: var(--primary);">--</div>
                            <div class="csa-stat-label">Renewals Due</div>
                        </div>
                    </div>

                    <div class="full-table-wrapper">
                        <table class="full-table">
                            <thead>
                                <tr>
                                    <th>Member</th>
                                    <th>Share Size</th>
                                    <th>Delivery Day</th>
                                    <th>Status</th>
                                    <th>Balance</th>
                                    <th>Renewal Date</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="csaTableBody">
                                <tr>
                                    <td colspan="7">
                                        <div class="loading-spinner">
                                            <div class="spinner"></div>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Wholesale Tab -->
                <div class="tab-content" id="tab-wholesale">
                    <div class="tab-header">
                        <h2 class="tab-title">Wholesale Customers</h2>
                        <div class="tab-actions">
                            <button class="btn btn-secondary" onclick="sendAvailabilityList()">
                                <span>üìß</span> Send Availability
                            </button>
                            <button class="btn btn-primary" onclick="openNewWholesaleModal()">
                                <span>+</span> Add Customer
                            </button>
                        </div>
                    </div>

                    <div class="full-table-wrapper">
                        <table class="full-table">
                            <thead>
                                <tr>
                                    <th>Business Name</th>
                                    <th>Contact</th>
                                    <th>Type</th>
                                    <th>Delivery Day</th>
                                    <th>Avg. Order</th>
                                    <th>Total Orders</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="wholesaleTableBody">
                                <tr>
                                    <td colspan="7">
                                        <div class="loading-spinner">
                                            <div class="spinner"></div>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Pick & Pack Tab -->
                <div class="tab-content" id="tab-pickpack">
                    <div class="tab-header">
                        <h2 class="tab-title">Pick & Pack</h2>
                        <div class="tab-actions">
                            <button class="btn btn-secondary" onclick="printPickList()">
                                <span>üñ®Ô∏è</span> Print Pick List
                            </button>
                            <button class="btn btn-secondary" onclick="printPackingLabels()">
                                <span>üè∑Ô∏è</span> Print Labels
                            </button>
                            <button class="btn btn-primary" onclick="generatePickList()">
                                <span>‚ö°</span> Generate
                            </button>
                        </div>
                    </div>

                    <div class="pick-pack-header">
                        <div class="pick-date-selector">
                            <label>Delivery Date:</label>
                            <input type="date" class="filter-input" id="pickDate" onchange="loadPickList()">
                        </div>
                        <div class="pick-stats">
                            <div class="pick-stat">
                                <div class="pick-stat-value" id="totalOrders">--</div>
                                <div class="pick-stat-label">Total Orders</div>
                            </div>
                            <div class="pick-stat">
                                <div class="pick-stat-value" id="totalItems">--</div>
                                <div class="pick-stat-label">Total Items</div>
                            </div>
                            <div class="pick-stat">
                                <div class="pick-stat-value" id="pickedItems">--</div>
                                <div class="pick-stat-label">Picked</div>
                            </div>
                        </div>
                    </div>

                    <div class="pick-list-grid">
                        <div class="pick-list-section">
                            <div class="pick-list-header">
                                <h3 class="pick-list-title">
                                    <span>üåø</span> Field Pick List
                                </h3>
                                <span class="card-action">Print</span>
                            </div>
                            <div id="fieldPickList">
                                <div class="loading-spinner">
                                    <div class="spinner"></div>
                                </div>
                            </div>
                        </div>

                        <div class="pick-list-section">
                            <div class="pick-list-header">
                                <h3 class="pick-list-title">
                                    <span>üì¶</span> Pack by Order
                                </h3>
                                <span class="card-action">Print</span>
                            </div>
                            <div id="packByOrder">
                                <div class="loading-spinner">
                                    <div class="spinner"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Campaigns Tab -->
                <div class="tab-content" id="tab-campaigns">
                    <div class="tab-header">
                        <h2 class="tab-title">Campaigns</h2>
                        <div class="tab-actions">
                            <button class="btn btn-primary" onclick="openNewCampaignModal()">
                                <span>+</span> New Campaign
                            </button>
                        </div>
                    </div>

                    <div class="quick-sms-card">
                        <h3 class="quick-sms-title">
                            <span>üì±</span> Quick SMS Blast
                        </h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Recipients</label>
                                <div class="recipient-tags">
                                    <span class="recipient-tag" data-group="all">All Customers</span>
                                    <span class="recipient-tag" data-group="csa">CSA Members</span>
                                    <span class="recipient-tag" data-group="wholesale">Wholesale</span>
                                    <span class="recipient-tag" data-group="tuesday">Tuesday Delivery</span>
                                    <span class="recipient-tag" data-group="friday">Friday Delivery</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Template</label>
                                <select class="form-select" id="smsTemplate" onchange="loadTemplate()">
                                    <option value="">Select template...</option>
                                    <option value="order_reminder">Order Deadline Reminder</option>
                                    <option value="new_arrival">New Product Arrival</option>
                                    <option value="flash_sale">Flash Sale</option>
                                    <option value="delivery_update">Delivery Update</option>
                                </select>
                            </div>
                            <div class="form-group full-width">
                                <label class="form-label">Message</label>
                                <textarea class="form-textarea" id="smsMessage" placeholder="Type your message..." maxlength="160"></textarea>
                                <div class="char-count"><span id="charCount">0</span>/160 characters</div>
                            </div>
                        </div>
                        <button class="btn btn-success" onclick="sendSMSBlast()">
                            <span>üì§</span> Send SMS
                        </button>
                    </div>

                    <h3 style="margin-bottom: 16px;">Recent Campaigns</h3>
                    <div class="campaigns-grid" id="campaignsGrid">
                        <div class="loading-spinner">
                            <div class="spinner"></div>
                        </div>
                    </div>
                </div>

                <!-- Reports Tab -->
                <div class="tab-content" id="tab-reports">
                    <div class="reports-header">
                        <h2 class="tab-title">Reports</h2>
                        <div class="date-range-picker">
                            <label class="filter-label">Date Range:</label>
                            <input type="date" class="filter-input" id="reportStartDate">
                            <span>to</span>
                            <input type="date" class="filter-input" id="reportEndDate">
                            <button class="btn btn-primary" onclick="generateReports()">Generate</button>
                        </div>
                    </div>

                    <div class="reports-grid">
                        <div class="report-card">
                            <h3 class="report-title">Revenue by Week</h3>
                            <div class="chart-placeholder" id="revenueChart">
                                üìä Revenue Chart
                            </div>
                        </div>

                        <div class="report-card">
                            <h3 class="report-title">Orders by Channel</h3>
                            <div class="chart-placeholder" id="channelChart">
                                üìä Channel Distribution
                            </div>
                        </div>

                        <div class="report-card">
                            <h3 class="report-title">Top Selling Crops</h3>
                            <ul class="top-items-list" id="topCropsList">
                                <li class="top-item">
                                    <span class="top-item-rank">1</span>
                                    <div class="top-item-info">
                                        <div class="top-item-name">Loading...</div>
                                    </div>
                                </li>
                            </ul>
                        </div>

                        <div class="report-card">
                            <h3 class="report-title">Top Customers</h3>
                            <ul class="top-items-list" id="topCustomersList">
                                <li class="top-item">
                                    <span class="top-item-rank">1</span>
                                    <div class="top-item-info">
                                        <div class="top-item-name">Loading...</div>
                                    </div>
                                </li>
                            </ul>
                        </div>

                        <div class="report-card full-width">
                            <h3 class="report-title">Sales Summary</h3>
                            <div class="stats-grid" style="margin-bottom: 0;">
                                <div class="stat-card">
                                    <div class="stat-label">Total Revenue</div>
                                    <div class="stat-value" id="reportRevenue">--</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-label">Total Orders</div>
                                    <div class="stat-value" id="reportOrders">--</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-label">Avg Order Value</div>
                                    <div class="stat-value" id="reportAOV">--</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-label">New Customers</div>
                                    <div class="stat-value" id="reportNewCustomers">--</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <div class="modal-overlay" id="newOrderModal">
        <div class="modal large">
            <div class="modal-header">
                <h3 class="modal-title">New Order</h3>
                <button class="modal-close" onclick="closeModal('newOrderModal')">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Customer *</label>
                        <select class="form-select" id="orderCustomer" required>
                            <option value="">Select customer...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Delivery Date *</label>
                        <input type="date" class="form-input" id="orderDeliveryDate" required>
                    </div>
                    <div class="form-group full-width">
                        <label class="form-label">Order Items</label>
                        <div id="orderItems">
                            <!-- Dynamic order items will be added here -->
                        </div>
                        <button class="btn btn-secondary" onclick="addOrderItem()" style="margin-top: 12px;">
                            + Add Item
                        </button>
                    </div>
                    <div class="form-group full-width">
                        <label class="form-label">Notes</label>
                        <textarea class="form-textarea" id="orderNotes" placeholder="Special instructions..."></textarea>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('newOrderModal')">Cancel</button>
                <button class="btn btn-primary" onclick="saveOrder()">Create Order</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="newCustomerModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Add Customer</h3>
                <button class="modal-close" onclick="closeModal('newCustomerModal')">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-grid">
                    <div class="form-group full-width">
                        <label class="form-label">Name *</label>
                        <input type="text" class="form-input" id="customerName" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Type *</label>
                        <select class="form-select" id="customerType" required>
                            <option value="">Select type...</option>
                            <option value="CSA">CSA Member</option>
                            <option value="Wholesale">Wholesale</option>
                            <option value="Retail">Retail</option>
                            <option value="Restaurant">Restaurant</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Preferred Day</label>
                        <select class="form-select" id="customerDay">
                            <option value="">Select day...</option>
                            <option value="Tuesday">Tuesday</option>
                            <option value="Friday">Friday</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email *</label>
                        <input type="email" class="form-input" id="customerEmail" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Phone *</label>
                        <input type="tel" class="form-input" id="customerPhone" required>
                    </div>
                    <div class="form-group full-width">
                        <label class="form-label">Address</label>
                        <input type="text" class="form-input" id="customerAddress">
                    </div>
                    <div class="form-group full-width">
                        <label class="form-label">Delivery Instructions</label>
                        <textarea class="form-textarea" id="customerInstructions" placeholder="Gate code, leave at door, etc."></textarea>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('newCustomerModal')">Cancel</button>
                <button class="btn btn-primary" onclick="saveCustomer()">Add Customer</button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Load shared API configuration -->
    <script src="api-config.js"></script>

    <script>
        // ========================================
        // TINY SEED SALES DASHBOARD - JAVASCRIPT
        // ========================================

        // API Instance - uses unified API config
        const api = new SalesAPI();

        // App State
        let AppState = {
            currentTab: 'dashboard',
            orders: [],
            customers: [],
            inventory: [],
            csaMembers: [],
            campaigns: []
        };

        // ========================================
        // INITIALIZATION
        // ========================================

        document.addEventListener('DOMContentLoaded', () => {
            initNavigation();
            initFilters();
            initSMSForm();
            loadDashboardData();
            setDefaultDates();
        });

        function initNavigation() {
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', () => {
                    const tab = item.dataset.tab;
                    if (tab) switchTab(tab);
                });
            });
        }

        function initFilters() {
            document.querySelectorAll('.filter-tab').forEach(tab => {
                tab.addEventListener('click', (e) => {
                    const parent = e.target.closest('.filter-tabs');
                    parent.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
                    e.target.classList.add('active');
                    applyFilters();
                });
            });

            document.querySelectorAll('.recipient-tag').forEach(tag => {
                tag.addEventListener('click', () => {
                    tag.classList.toggle('selected');
                });
            });
        }

        function initSMSForm() {
            const textarea = document.getElementById('smsMessage');
            textarea.addEventListener('input', () => {
                document.getElementById('charCount').textContent = textarea.value.length;
            });
        }

        function setDefaultDates() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('filterDate').value = today;
            document.getElementById('pickDate').value = today;

            // Report dates - last 30 days
            const thirtyDaysAgo = new Date();
            thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);
            document.getElementById('reportStartDate').value = thirtyDaysAgo.toISOString().split('T')[0];
            document.getElementById('reportEndDate').value = today;
        }

        // ========================================
        // TAB NAVIGATION
        // ========================================

        function switchTab(tabId) {
            // Update nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.toggle('active', item.dataset.tab === tabId);
            });

            // Update tab content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.toggle('active', content.id === `tab-${tabId}`);
            });

            // Update page title
            const titles = {
                dashboard: 'Dashboard',
                orders: 'Orders',
                customers: 'Customers',
                inventory: 'Inventory',
                csa: 'CSA Members',
                wholesale: 'Wholesale',
                pickpack: 'Pick & Pack',
                campaigns: 'Campaigns',
                reports: 'Reports'
            };
            document.getElementById('pageTitle').textContent = titles[tabId] || 'Dashboard';

            // Load tab data
            AppState.currentTab = tabId;
            loadTabData(tabId);
        }

        function loadTabData(tabId) {
            switch(tabId) {
                case 'dashboard':
                    loadDashboardData();
                    break;
                case 'orders':
                    loadOrders();
                    break;
                case 'customers':
                    loadCustomers();
                    break;
                case 'inventory':
                    loadInventory();
                    break;
                case 'csa':
                    loadCSAMembers();
                    break;
                case 'wholesale':
                    loadWholesale();
                    break;
                case 'pickpack':
                    loadPickList();
                    break;
                case 'campaigns':
                    loadCampaigns();
                    break;
                case 'reports':
                    loadReports();
                    break;
            }
        }

        // ========================================
        // DATA LOADING FUNCTIONS
        // ========================================

        async function loadDashboardData() {
            try {
                // Load dashboard stats from API
                const result = await api.getDashboardStats();

                if (result.success && result.stats) {
                    document.getElementById('todayOrders').textContent = result.stats.todayOrders || '0';
                    document.getElementById('todayRevenue').textContent = '$' + (result.stats.todayRevenue || 0).toLocaleString();
                    document.getElementById('pendingDeliveries').textContent = result.stats.pendingDeliveries || '0';
                    document.getElementById('activeCSA').textContent = result.stats.activeCSAMembers || '0';
                    document.getElementById('pendingOrdersBadge').textContent = result.stats.pendingOrders || '0';
                } else {
                    // Fallback to sample data
                    document.getElementById('todayOrders').textContent = '24';
                    document.getElementById('todayRevenue').textContent = '$1,847';
                    document.getElementById('pendingDeliveries').textContent = '12';
                    document.getElementById('activeCSA').textContent = '45';
                    document.getElementById('pendingOrdersBadge').textContent = '8';
                }

                // Load recent orders
                loadRecentOrders();
            } catch (error) {
                console.error('Error loading dashboard:', error);
                // Fallback to sample data
                document.getElementById('todayOrders').textContent = '24';
                document.getElementById('todayRevenue').textContent = '$1,847';
                document.getElementById('pendingDeliveries').textContent = '12';
                document.getElementById('activeCSA').textContent = '45';
                document.getElementById('pendingOrdersBadge').textContent = '8';
                loadRecentOrders();
            }
        }

        function loadRecentOrders() {
            // Sample data - will be replaced with API
            const orders = [
                { id: 'ORD-20260114-001', customer: 'Green Valley Restaurant', email: 'orders@greenvalley.com', total: 284.50, status: 'pending' },
                { id: 'ORD-20260114-002', customer: 'Sarah Johnson', email: 'sarah@email.com', total: 42.00, status: 'confirmed' },
                { id: 'ORD-20260114-003', customer: 'Pittsburgh Food Co-op', email: 'buyer@pghfood.org', total: 567.00, status: 'picking' },
                { id: 'ORD-20260114-004', customer: 'Chef Michael', email: 'michael@bistro.com', total: 198.75, status: 'packed' },
                { id: 'ORD-20260114-005', customer: 'Farm Table Cafe', email: 'orders@farmtable.com', total: 425.00, status: 'delivered' }
            ];

            const tbody = document.getElementById('recentOrdersTable');
            tbody.innerHTML = orders.map(order => `
                <tr>
                    <td><span class="order-id">${order.id}</span></td>
                    <td>
                        <div class="customer-info">
                            <div class="customer-avatar">${order.customer.charAt(0)}</div>
                            <div>
                                <div class="customer-name">${order.customer}</div>
                                <div class="customer-email">${order.email}</div>
                            </div>
                        </div>
                    </td>
                    <td><strong>$${order.total.toFixed(2)}</strong></td>
                    <td><span class="status-badge ${order.status}">${capitalizeFirst(order.status)}</span></td>
                </tr>
            `).join('');
        }

        async function loadOrders() {
            try {
                // Load orders from API
                const result = await api.getOrders();

                if (result.success && result.orders) {
                    AppState.orders = result.orders.map(o => ({
                        id: o.Order_ID,
                        customer: o.Customer_Name,
                        type: o.Customer_Type || 'Direct',
                        items: o.Item_Count || 0,
                        total: parseFloat(o.Order_Total) || 0,
                        date: o.Order_Date,
                        status: (o.Status || 'pending').toLowerCase()
                    }));
                    renderOrders(AppState.orders);
                } else {
                    // Fallback to sample data
                    const orders = [
                        { id: 'ORD-20260114-001', customer: 'Green Valley Restaurant', type: 'Restaurant', items: 8, total: 284.50, date: '2026-01-14', status: 'pending' },
                        { id: 'ORD-20260114-002', customer: 'Sarah Johnson', type: 'CSA', items: 1, total: 42.00, date: '2026-01-14', status: 'confirmed' },
                        { id: 'ORD-20260114-003', customer: 'Pittsburgh Food Co-op', type: 'Wholesale', items: 15, total: 567.00, date: '2026-01-14', status: 'picking' },
                        { id: 'ORD-20260114-004', customer: 'Chef Michael', type: 'Restaurant', items: 6, total: 198.75, date: '2026-01-14', status: 'packed' },
                        { id: 'ORD-20260114-005', customer: 'Farm Table Cafe', type: 'Wholesale', items: 12, total: 425.00, date: '2026-01-14', status: 'delivered' }
                    ];
                    AppState.orders = orders;
                    renderOrders(orders);
                }
            } catch (error) {
                console.error('Error loading orders:', error);
                // Fallback to sample data
                const orders = [
                    { id: 'ORD-20260114-001', customer: 'Green Valley Restaurant', type: 'Restaurant', items: 8, total: 284.50, date: '2026-01-14', status: 'pending' },
                    { id: 'ORD-20260114-002', customer: 'Sarah Johnson', type: 'CSA', items: 1, total: 42.00, date: '2026-01-14', status: 'confirmed' }
                ];
                AppState.orders = orders;
                renderOrders(orders);
            }
        }

        function renderOrders(orders) {
            const tbody = document.getElementById('ordersTableBody');
            tbody.innerHTML = orders.map(order => `
                <tr>
                    <td><span class="order-id">${order.id}</span></td>
                    <td>
                        <div>
                            <div style="font-weight: 500;">${order.customer}</div>
                            <div style="font-size: 12px; color: var(--text-secondary);">${order.type}</div>
                        </div>
                    </td>
                    <td>${order.items} items</td>
                    <td><strong>$${order.total.toFixed(2)}</strong></td>
                    <td>${formatDate(order.date)}</td>
                    <td><span class="status-badge ${order.status}">${capitalizeFirst(order.status)}</span></td>
                    <td>
                        <div class="action-btns">
                            <button class="action-btn" onclick="viewOrder('${order.id}')" title="View">üëÅ</button>
                            <button class="action-btn edit" onclick="editOrder('${order.id}')" title="Edit">‚úèÔ∏è</button>
                            <button class="action-btn" onclick="updateOrderStatus('${order.id}')" title="Update Status">üì¶</button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        async function loadCustomers() {
            try {
                // Load customers from API
                const result = await api.getCustomers();

                if (result.success && result.customers) {
                    AppState.customers = result.customers.map(c => ({
                        id: c.Customer_ID,
                        name: c.Customer_Name,
                        type: c.Customer_Type,
                        email: c.Email,
                        phone: c.Phone,
                        orders: c.Total_Orders || 0,
                        revenue: parseFloat(c.Total_Revenue) || 0
                    }));
                    renderCustomers(AppState.customers);
                } else {
                    // Fallback to sample data
                    const customers = [
                        { id: 'CUST-001', name: 'Green Valley Restaurant', type: 'Restaurant', email: 'orders@greenvalley.com', phone: '412-555-0101', orders: 45, revenue: 12450.00 },
                        { id: 'CUST-002', name: 'Pittsburgh Food Co-op', type: 'Wholesale', email: 'buyer@pghfood.org', phone: '412-555-0102', orders: 52, revenue: 28900.00 },
                        { id: 'CUST-003', name: 'Sarah Johnson', type: 'CSA', email: 'sarah@email.com', phone: '412-555-0103', orders: 24, revenue: 1008.00 }
                    ];
                    AppState.customers = customers;
                    renderCustomers(customers);
                }
            } catch (error) {
                console.error('Error loading customers:', error);
                // Fallback to sample data
                const customers = [
                    { id: 'CUST-001', name: 'Green Valley Restaurant', type: 'Restaurant', email: 'orders@greenvalley.com', phone: '412-555-0101', orders: 45, revenue: 12450.00 },
                    { id: 'CUST-002', name: 'Pittsburgh Food Co-op', type: 'Wholesale', email: 'buyer@pghfood.org', phone: '412-555-0102', orders: 52, revenue: 28900.00 }
                ];
                AppState.customers = customers;
                renderCustomers(customers);
            }
        }

        function renderCustomers(customers) {
            const grid = document.getElementById('customersGrid');
            grid.innerHTML = customers.map(customer => `
                <div class="customer-card">
                    <div class="customer-card-header">
                        <div class="customer-card-avatar">${customer.name.charAt(0)}</div>
                        <div class="customer-card-info">
                            <h3>${customer.name}</h3>
                            <span class="customer-type-badge ${customer.type.toLowerCase()}">${customer.type}</span>
                        </div>
                    </div>
                    <div class="customer-card-stats">
                        <div class="customer-stat">
                            <div class="customer-stat-value">${customer.orders}</div>
                            <div class="customer-stat-label">Orders</div>
                        </div>
                        <div class="customer-stat">
                            <div class="customer-stat-value">$${(customer.revenue / 1000).toFixed(1)}k</div>
                            <div class="customer-stat-label">Revenue</div>
                        </div>
                        <div class="customer-stat">
                            <div class="customer-stat-value">$${Math.round(customer.revenue / customer.orders)}</div>
                            <div class="customer-stat-label">Avg Order</div>
                        </div>
                    </div>
                    <div class="customer-card-contact">
                        <p>üìß ${customer.email}</p>
                        <p>üì± ${customer.phone}</p>
                    </div>
                    <div class="customer-card-actions">
                        <button class="btn btn-secondary" onclick="viewCustomer('${customer.id}')">View</button>
                        <button class="btn btn-primary" onclick="newOrderForCustomer('${customer.id}')">New Order</button>
                    </div>
                </div>
            `).join('');
        }

        async function loadInventory() {
            try {
                // Load inventory from API - uses REF_Crops for unified crop data
                const result = await api.getInventory();

                if (result.success && result.inventory) {
                    AppState.inventory = result.inventory.map(i => ({
                        id: i.Product_ID || i.Crop_ID,
                        name: i.Crop_Name || i.Product_Name,
                        variety: i.Variety || '',
                        unit: i.Unit || 'each',
                        available: i.Available_Qty || 0,
                        reserved: i.Reserved_Qty || 0,
                        retail: parseFloat(i.Retail_Price) || 0,
                        wholesale: parseFloat(i.Wholesale_Price) || 0
                    }));
                    renderInventory(AppState.inventory);
                } else {
                    // Fallback to sample data
                    const inventory = [
                        { id: 'TSF-BASI-BN-001', name: 'Basil', variety: 'Genovese', unit: 'bunch', available: 45, reserved: 12, retail: 4.00, wholesale: 2.50 },
                        { id: 'TSF-TOMA-LB-001', name: 'Tomatoes', variety: 'Cherokee Purple', unit: 'lb', available: 120, reserved: 35, retail: 6.00, wholesale: 4.00 },
                        { id: 'TSF-KALE-BN-001', name: 'Kale', variety: 'Lacinato', unit: 'bunch', available: 60, reserved: 8, retail: 4.00, wholesale: 2.50 }
                    ];
                    AppState.inventory = inventory;
                    renderInventory(inventory);
                }
            } catch (error) {
                console.error('Error loading inventory:', error);
                // Fallback to sample data
                const inventory = [
                    { id: 'TSF-BASI-BN-001', name: 'Basil', variety: 'Genovese', unit: 'bunch', available: 45, reserved: 12, retail: 4.00, wholesale: 2.50 },
                    { id: 'TSF-TOMA-LB-001', name: 'Tomatoes', variety: 'Cherokee Purple', unit: 'lb', available: 120, reserved: 35, retail: 6.00, wholesale: 4.00 }
                ];
                AppState.inventory = inventory;
                renderInventory(inventory);
            }
        }

        function renderInventory(inventory) {
            const tbody = document.getElementById('inventoryTableBody');
            tbody.innerHTML = inventory.map(item => {
                const stockStatus = item.available <= 5 ? 'low' : item.available === 0 ? 'out' : 'good';
                const stockColor = stockStatus === 'low' ? 'var(--warning)' : stockStatus === 'out' ? 'var(--danger)' : 'var(--success)';

                return `
                    <tr>
                        <td><strong>${item.name}</strong></td>
                        <td>${item.variety}</td>
                        <td>${item.unit}</td>
                        <td style="color: ${stockColor}; font-weight: 600;">${item.available}</td>
                        <td>${item.reserved}</td>
                        <td>$${item.retail.toFixed(2)}</td>
                        <td>$${item.wholesale.toFixed(2)}</td>
                        <td>
                            <div class="action-btns">
                                <button class="action-btn edit" onclick="editInventory('${item.id}')" title="Edit">‚úèÔ∏è</button>
                                <button class="action-btn" onclick="adjustStock('${item.id}')" title="Adjust Stock">üìä</button>
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        async function loadCSAMembers() {
            try {
                // Sample CSA data
                const members = [
                    { id: 'CSA-001', name: 'Sarah Johnson', share: 'Medium', day: 'Tuesday', status: 'Active', balance: 0, renewal: '2026-06-01' },
                    { id: 'CSA-002', name: 'Mary Williams', share: 'Small', day: 'Friday', status: 'Active', balance: 0, renewal: '2026-06-01' },
                    { id: 'CSA-003', name: 'John Smith', share: 'Large', day: 'Tuesday', status: 'Paused', balance: 150.00, renewal: '2026-04-15' },
                    { id: 'CSA-004', name: 'Emily Davis', share: 'Family', day: 'Tuesday', status: 'Active', balance: 0, renewal: '2026-08-01' },
                    { id: 'CSA-005', name: 'Robert Brown', share: 'Medium', day: 'Friday', status: 'Active', balance: 75.00, renewal: '2026-05-15' }
                ];

                AppState.csaMembers = members;

                // Update stats
                const active = members.filter(m => m.status === 'Active').length;
                const paused = members.filter(m => m.status === 'Paused').length;
                document.getElementById('csaActive').textContent = active;
                document.getElementById('csaPaused').textContent = paused;
                document.getElementById('csaRevenue').textContent = '$1,890';
                document.getElementById('csaRenewal').textContent = '3';

                renderCSAMembers(members);
            } catch (error) {
                console.error('Error loading CSA members:', error);
            }
        }

        function renderCSAMembers(members) {
            const tbody = document.getElementById('csaTableBody');
            tbody.innerHTML = members.map(member => `
                <tr>
                    <td>
                        <div class="customer-info">
                            <div class="customer-avatar">${member.name.charAt(0)}</div>
                            <div>
                                <div class="customer-name">${member.name}</div>
                                <div class="customer-email">${member.id}</div>
                            </div>
                        </div>
                    </td>
                    <td><strong>${member.share}</strong></td>
                    <td>${member.day}</td>
                    <td>
                        <div class="member-status">
                            <span class="status-dot ${member.status.toLowerCase()}"></span>
                            ${member.status}
                        </div>
                    </td>
                    <td style="color: ${member.balance > 0 ? 'var(--warning)' : 'var(--success)'};">
                        ${member.balance > 0 ? `$${member.balance.toFixed(2)}` : 'Paid'}
                    </td>
                    <td>${formatDate(member.renewal)}</td>
                    <td>
                        <div class="action-btns">
                            <button class="action-btn" onclick="viewMember('${member.id}')" title="View">üëÅ</button>
                            <button class="action-btn" onclick="setVacationHold('${member.id}')" title="Vacation Hold">üèñÔ∏è</button>
                            <button class="action-btn edit" onclick="editMember('${member.id}')" title="Edit">‚úèÔ∏è</button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        async function loadWholesale() {
            const customers = AppState.customers.filter(c =>
                c.type === 'Wholesale' || c.type === 'Restaurant'
            );

            const tbody = document.getElementById('wholesaleTableBody');
            tbody.innerHTML = customers.map(customer => `
                <tr>
                    <td><strong>${customer.name}</strong></td>
                    <td>${customer.email}</td>
                    <td><span class="customer-type-badge ${customer.type.toLowerCase()}">${customer.type}</span></td>
                    <td>Tuesday</td>
                    <td>$${Math.round(customer.revenue / customer.orders)}</td>
                    <td>${customer.orders}</td>
                    <td>
                        <div class="action-btns">
                            <button class="action-btn" onclick="viewCustomer('${customer.id}')" title="View">üëÅ</button>
                            <button class="action-btn" onclick="sendPriceList('${customer.id}')" title="Send Price List">üìß</button>
                            <button class="action-btn edit" onclick="newOrderForCustomer('${customer.id}')" title="New Order">üì¶</button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        async function loadPickList() {
            const fieldPickList = document.getElementById('fieldPickList');
            const packByOrder = document.getElementById('packByOrder');

            // Sample pick list data
            const picks = [
                { name: 'Basil', variety: 'Genovese', qty: 24, unit: 'bunches', location: 'Greenhouse 1, Row A' },
                { name: 'Tomatoes', variety: 'Cherokee Purple', qty: 45, unit: 'lbs', location: 'Field 2, Beds 5-8' },
                { name: 'Lettuce', variety: 'Butterhead', qty: 30, unit: 'heads', location: 'Field 1, Beds 1-3' },
                { name: 'Kale', variety: 'Lacinato', qty: 18, unit: 'bunches', location: 'Field 1, Bed 4' },
                { name: 'Carrots', variety: 'Nantes', qty: 60, unit: 'lbs', location: 'Field 3, Beds 1-2' }
            ];

            const orders = [
                { customer: 'Green Valley Restaurant', items: '8 items - $284.50' },
                { customer: 'Pittsburgh Food Co-op', items: '15 items - $567.00' },
                { customer: 'Chef Michael', items: '6 items - $198.75' },
                { customer: 'Farm Table Cafe', items: '12 items - $425.00' }
            ];

            // Update stats
            document.getElementById('totalOrders').textContent = orders.length;
            document.getElementById('totalItems').textContent = picks.reduce((sum, p) => sum + p.qty, 0);
            document.getElementById('pickedItems').textContent = '0';

            fieldPickList.innerHTML = picks.map(pick => `
                <div class="pick-item">
                    <div class="pick-checkbox" onclick="togglePicked(this)"></div>
                    <div class="pick-item-info">
                        <div class="pick-item-name">${pick.name} - ${pick.variety}</div>
                        <div class="pick-item-location">üìç ${pick.location}</div>
                    </div>
                    <div class="pick-item-qty">${pick.qty} ${pick.unit}</div>
                </div>
            `).join('');

            packByOrder.innerHTML = orders.map(order => `
                <div class="pick-item">
                    <div class="pick-checkbox" onclick="togglePicked(this)"></div>
                    <div class="pick-item-info">
                        <div class="pick-item-name">${order.customer}</div>
                        <div class="pick-item-location">${order.items}</div>
                    </div>
                    <div class="pick-item-qty">üì¶</div>
                </div>
            `).join('');
        }

        async function loadCampaigns() {
            const campaigns = [
                { id: 1, type: 'sms', title: 'Tuesday Order Reminder', preview: 'Order deadline tonight at 5pm! Fresh tomatoes, basil, and more available...', sent: 45, opened: 38, clicked: 12 },
                { id: 2, type: 'email', title: 'This Week\'s Harvest', preview: 'See what\'s fresh from the farm this week. Cherokee Purple tomatoes are back!', sent: 120, opened: 85, clicked: 34 },
                { id: 3, type: 'sms', title: 'Flash Sale - Excess Zucchini', preview: '50% off zucchini today only! Order before noon.', sent: 45, opened: 42, clicked: 28 }
            ];

            const grid = document.getElementById('campaignsGrid');
            grid.innerHTML = campaigns.map(campaign => `
                <div class="campaign-card">
                    <div class="campaign-card-header">
                        <span class="campaign-type ${campaign.type}">
                            ${campaign.type === 'sms' ? 'üì± SMS' : 'üìß Email'}
                        </span>
                        <span style="color: var(--text-muted); font-size: 12px;">2 days ago</span>
                    </div>
                    <div class="campaign-card-body">
                        <h4 class="campaign-title">${campaign.title}</h4>
                        <p class="campaign-preview">${campaign.preview}</p>
                        <div class="campaign-stats">
                            <div class="campaign-stat">
                                <div class="campaign-stat-value">${campaign.sent}</div>
                                <div class="campaign-stat-label">Sent</div>
                            </div>
                            <div class="campaign-stat">
                                <div class="campaign-stat-value">${campaign.opened}</div>
                                <div class="campaign-stat-label">Opened</div>
                            </div>
                            <div class="campaign-stat">
                                <div class="campaign-stat-value">${campaign.clicked}</div>
                                <div class="campaign-stat-label">Clicked</div>
                            </div>
                            <div class="campaign-stat">
                                <div class="campaign-stat-value">${Math.round(campaign.opened / campaign.sent * 100)}%</div>
                                <div class="campaign-stat-label">Open Rate</div>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        async function loadReports() {
            // Sample report data
            document.getElementById('reportRevenue').textContent = '$24,560';
            document.getElementById('reportOrders').textContent = '187';
            document.getElementById('reportAOV').textContent = '$131';
            document.getElementById('reportNewCustomers').textContent = '8';

            // Top crops
            const topCrops = [
                { name: 'Tomatoes', detail: '450 lbs sold', value: '$2,700' },
                { name: 'Basil', detail: '180 bunches', value: '$720' },
                { name: 'Lettuce Mix', detail: '120 bags', value: '$600' },
                { name: 'Kale', detail: '95 bunches', value: '$380' },
                { name: 'Carrots', detail: '200 lbs', value: '$800' }
            ];

            document.getElementById('topCropsList').innerHTML = topCrops.map((crop, i) => `
                <li class="top-item">
                    <span class="top-item-rank">${i + 1}</span>
                    <div class="top-item-info">
                        <div class="top-item-name">${crop.name}</div>
                        <div class="top-item-detail">${crop.detail}</div>
                    </div>
                    <div class="top-item-value">${crop.value}</div>
                </li>
            `).join('');

            // Top customers
            const topCustomers = [
                { name: 'Pittsburgh Food Co-op', detail: '52 orders', value: '$28,900' },
                { name: 'Farm Table Cafe', detail: '61 orders', value: '$15,230' },
                { name: 'Green Valley Restaurant', detail: '45 orders', value: '$12,450' },
                { name: 'Chef Michael', detail: '38 orders', value: '$8,540' },
                { name: 'The Local Pub', detail: '28 orders', value: '$5,600' }
            ];

            document.getElementById('topCustomersList').innerHTML = topCustomers.map((customer, i) => `
                <li class="top-item">
                    <span class="top-item-rank">${i + 1}</span>
                    <div class="top-item-info">
                        <div class="top-item-name">${customer.name}</div>
                        <div class="top-item-detail">${customer.detail}</div>
                    </div>
                    <div class="top-item-value">${customer.value}</div>
                </li>
            `).join('');
        }

        // ========================================
        // ACTION FUNCTIONS
        // ========================================

        function refreshData() {
            loadTabData(AppState.currentTab);
            showToast('Data refreshed', 'success');
        }

        function applyFilters() {
            // Implement filtering logic based on active filters
            loadTabData(AppState.currentTab);
        }

        function togglePicked(element) {
            element.classList.toggle('checked');
            if (element.classList.contains('checked')) {
                element.innerHTML = '‚úì';
            } else {
                element.innerHTML = '';
            }
            updatePickedCount();
        }

        function updatePickedCount() {
            const checked = document.querySelectorAll('.pick-checkbox.checked').length;
            document.getElementById('pickedItems').textContent = checked;
        }

        // ========================================
        // MODAL FUNCTIONS
        // ========================================

        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        function openNewOrderModal() {
            openModal('newOrderModal');
        }

        function openNewCustomerModal() {
            openModal('newCustomerModal');
        }

        async function saveCustomer() {
            const customer = {
                name: document.getElementById('customerName').value,
                type: document.getElementById('customerType').value,
                email: document.getElementById('customerEmail').value,
                phone: document.getElementById('customerPhone').value,
                address: document.getElementById('customerAddress').value,
                day: document.getElementById('customerDay').value,
                instructions: document.getElementById('customerInstructions').value
            };

            // Validate
            if (!customer.name || !customer.type || !customer.email || !customer.phone) {
                showToast('Please fill in all required fields', 'error');
                return;
            }

            try {
                // Save to API
                const result = await api.createCustomer({
                    Customer_Name: customer.name,
                    Customer_Type: customer.type,
                    Email: customer.email,
                    Phone: customer.phone,
                    Delivery_Address: customer.address,
                    Delivery_Day: customer.day,
                    Delivery_Instructions: customer.instructions
                });

                if (result.success) {
                    showToast('Customer added successfully!', 'success');
                    closeModal('newCustomerModal');
                    loadCustomers();
                } else {
                    showToast(result.error || 'Failed to add customer', 'error');
                }
            } catch (error) {
                console.error('Error saving customer:', error);
                showToast('Failed to add customer. Please try again.', 'error');
            }
        }

        async function saveOrder() {
            try {
                // Gather order data from form
                const orderData = {
                    Customer_ID: document.getElementById('orderCustomer')?.value,
                    Order_Date: new Date().toISOString().split('T')[0],
                    Status: 'Pending',
                    items: [] // Would be populated from order items form
                };

                const result = await api.createOrder(orderData);

                if (result.success) {
                    showToast('Order created successfully!', 'success');
                    closeModal('newOrderModal');
                    loadOrders();
                } else {
                    showToast(result.error || 'Failed to create order', 'error');
                }
            } catch (error) {
                console.error('Error saving order:', error);
                showToast('Failed to create order. Please try again.', 'error');
            }
        }

        // ========================================
        // SMS FUNCTIONS
        // ========================================

        function loadTemplate() {
            const templates = {
                order_reminder: 'Reminder: Order deadline is tonight at 5pm! Check out this week\'s fresh harvest at tinyseedfarm.com/order',
                new_arrival: 'Fresh from the field! We just harvested [CROP]. Order now before it\'s gone!',
                flash_sale: '‚ö° FLASH SALE: 30% off [ITEM] today only! Reply YES to add to your order.',
                delivery_update: 'Your Tiny Seed delivery is on the way! ETA: [TIME]. Questions? Reply to this message.'
            };

            const selected = document.getElementById('smsTemplate').value;
            if (selected && templates[selected]) {
                document.getElementById('smsMessage').value = templates[selected];
                document.getElementById('charCount').textContent = templates[selected].length;
            }
        }

        async function sendSMSBlast() {
            const message = document.getElementById('smsMessage').value;
            const selectedGroups = Array.from(document.querySelectorAll('.recipient-tag.selected'))
                .map(tag => tag.dataset.group);

            if (!message) {
                showToast('Please enter a message', 'error');
                return;
            }

            if (selectedGroups.length === 0) {
                showToast('Please select at least one recipient group', 'error');
                return;
            }

            try {
                // Send SMS campaign via API
                const result = await api.sendSMSCampaign({
                    message: message,
                    recipientGroups: selectedGroups,
                    timestamp: new Date().toISOString()
                });

                if (result.success) {
                    showToast(`SMS sent to ${result.recipientCount || selectedGroups.length} customers!`, 'success');
                    document.getElementById('smsMessage').value = '';
                    document.getElementById('charCount').textContent = '0';
                    document.querySelectorAll('.recipient-tag.selected').forEach(tag => tag.classList.remove('selected'));
                } else {
                    showToast(result.error || 'Failed to send SMS', 'error');
                }
            } catch (error) {
                console.error('Error sending SMS:', error);
                showToast('Failed to send SMS. Please try again.', 'error');
            }
        }

        // ========================================
        // UTILITY FUNCTIONS
        // ========================================

        function capitalizeFirst(str) {
            return str.charAt(0).toUpperCase() + str.slice(1);
        }

        function formatDate(dateStr) {
            const date = new Date(dateStr);
            return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
        }

        function toggleSidebar() {
            document.querySelector('.sidebar').classList.toggle('open');
        }

        // ========================================
        // TOAST NOTIFICATIONS
        // ========================================

        function showToast(message, type = 'info') {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;

            const icons = {
                success: '‚úì',
                error: '‚úï',
                warning: '‚ö†',
                info: '‚Ñπ'
            };

            toast.innerHTML = `
                <span class="toast-icon">${icons[type]}</span>
                <span class="toast-message">${message}</span>
                <button class="toast-close" onclick="this.parentElement.remove()">√ó</button>
            `;

            container.appendChild(toast);

            // Auto remove after 5 seconds
            setTimeout(() => {
                if (toast.parentElement) {
                    toast.remove();
                }
            }, 5000);
        }

        // ========================================
        // PLACEHOLDER FUNCTIONS (TO BE IMPLEMENTED)
        // ========================================

        function viewOrder(id) { showToast(`Viewing order ${id}`, 'info'); }
        function editOrder(id) { showToast(`Editing order ${id}`, 'info'); }
        function updateOrderStatus(id) { showToast(`Updating status for ${id}`, 'info'); }
        function viewCustomer(id) { showToast(`Viewing customer ${id}`, 'info'); }
        function newOrderForCustomer(id) { openNewOrderModal(); }
        function editInventory(id) { showToast(`Editing inventory ${id}`, 'info'); }
        function adjustStock(id) { showToast(`Adjusting stock for ${id}`, 'info'); }
        function viewMember(id) { showToast(`Viewing member ${id}`, 'info'); }
        function setVacationHold(id) { showToast(`Setting vacation hold for ${id}`, 'info'); }
        function editMember(id) { showToast(`Editing member ${id}`, 'info'); }
        function sendPriceList(id) { showToast(`Sending price list to ${id}`, 'info'); }
        function exportOrders() { showToast('Exporting orders...', 'info'); }
        function exportCustomers() { showToast('Exporting customers...', 'info'); }
        function syncFromHarvest() { showToast('Syncing from harvest log...', 'info'); }
        function openAddInventoryModal() { showToast('Opening add inventory modal', 'info'); }
        function generateWeeklyBoxes() { showToast('Generating weekly CSA boxes...', 'info'); }
        function openNewMemberModal() { openNewCustomerModal(); }
        function sendAvailabilityList() { showToast('Sending availability list...', 'info'); }
        function openNewWholesaleModal() { openNewCustomerModal(); }
        function printPickList() { window.print(); }
        function printPackingLabels() { showToast('Printing packing labels...', 'info'); }
        function generatePickList() { loadPickList(); showToast('Pick list generated!', 'success'); }
        function openNewCampaignModal() { showToast('Opening campaign builder...', 'info'); }
        function generateReports() { loadReports(); showToast('Reports generated!', 'success'); }
    </script>
</body>
</html>
