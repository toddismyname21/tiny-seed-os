<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PM Monitor - Tiny Seed OS</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="api-config.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #0f0f1a;
            color: #e0e0e0;
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            padding: 16px 24px;
            border-bottom: 1px solid #2d2d44;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header h1 {
            font-size: 1.5rem;
            color: #22c55e;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .header h1 span {
            font-size: 1.8rem;
        }

        .status-badge {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid #22c55e;
            border-radius: 20px;
            font-size: 0.85rem;
            color: #22c55e;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: #22c55e;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 24px;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 24px;
        }

        .card {
            background: linear-gradient(145deg, #1a1a2e 0%, #141428 100%);
            border-radius: 12px;
            border: 1px solid #2d2d44;
            overflow: hidden;
        }

        .card-header {
            background: rgba(45, 45, 68, 0.5);
            padding: 16px 20px;
            border-bottom: 1px solid #2d2d44;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-title {
            font-size: 1rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-title span {
            font-size: 1.2rem;
        }

        .card-body {
            padding: 20px;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(45, 45, 68, 0.5);
        }

        .stat-row:last-child {
            border-bottom: none;
        }

        .stat-label {
            color: #9ca3af;
            font-size: 0.9rem;
        }

        .stat-value {
            font-weight: 600;
            font-size: 1rem;
        }

        .stat-value.success { color: #22c55e; }
        .stat-value.warning { color: #f59e0b; }
        .stat-value.error { color: #ef4444; }
        .stat-value.info { color: #3b82f6; }

        .component-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .component-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 16px;
            border-radius: 8px;
            background: rgba(45, 45, 68, 0.3);
            margin-bottom: 8px;
            transition: background 0.2s;
        }

        .component-item:hover {
            background: rgba(45, 45, 68, 0.5);
        }

        .component-name {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .component-name code {
            font-size: 0.85rem;
            color: #9ca3af;
        }

        .status-indicator {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-working {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
        }

        .status-partial {
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
        }

        .status-broken {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        .status-disconnected {
            background: rgba(156, 163, 175, 0.2);
            color: #9ca3af;
        }

        .claude-session {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            background: rgba(45, 45, 68, 0.3);
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .claude-avatar {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, #22c55e, #16a34a);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
        }

        .claude-info {
            flex: 1;
            margin-left: 12px;
        }

        .claude-name {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .claude-task {
            font-size: 0.8rem;
            color: #9ca3af;
        }

        .activity-item {
            display: flex;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid rgba(45, 45, 68, 0.3);
        }

        .activity-icon {
            width: 32px;
            height: 32px;
            background: rgba(45, 45, 68, 0.5);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .activity-content {
            flex: 1;
        }

        .activity-title {
            font-size: 0.9rem;
            margin-bottom: 4px;
        }

        .activity-meta {
            font-size: 0.75rem;
            color: #9ca3af;
        }

        .api-check {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            background: rgba(45, 45, 68, 0.3);
            border-radius: 8px;
            margin-bottom: 12px;
        }

        .api-icon {
            font-size: 1.5rem;
        }

        .api-info {
            flex: 1;
        }

        .api-name {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .api-status {
            font-size: 0.8rem;
        }

        .latency {
            font-size: 0.85rem;
            padding: 4px 12px;
            background: rgba(45, 45, 68, 0.5);
            border-radius: 6px;
        }

        .full-width {
            grid-column: 1 / -1;
        }

        .issue-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .issue-item {
            padding: 12px 16px;
            background: rgba(239, 68, 68, 0.1);
            border-left: 3px solid #ef4444;
            border-radius: 0 8px 8px 0;
            margin-bottom: 8px;
        }

        .issue-item.warning {
            background: rgba(245, 158, 11, 0.1);
            border-left-color: #f59e0b;
        }

        .issue-title {
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 4px;
        }

        .issue-description {
            font-size: 0.8rem;
            color: #9ca3af;
        }

        .refresh-btn {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .refresh-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);
        }

        .refresh-btn.loading {
            opacity: 0.7;
            pointer-events: none;
        }

        .tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab {
            padding: 10px 20px;
            background: rgba(45, 45, 68, 0.3);
            border: 1px solid #2d2d44;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
        }

        .tab:hover {
            background: rgba(45, 45, 68, 0.5);
        }

        .tab.active {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            border-color: #22c55e;
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .manifest-table {
            width: 100%;
            border-collapse: collapse;
        }

        .manifest-table th, .manifest-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #2d2d44;
        }

        .manifest-table th {
            background: rgba(45, 45, 68, 0.5);
            font-weight: 600;
            font-size: 0.85rem;
            color: #9ca3af;
        }

        .manifest-table td {
            font-size: 0.9rem;
        }

        .manifest-table code {
            background: rgba(45, 45, 68, 0.5);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.8rem;
        }

        .quick-actions {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 12px 20px;
            background: rgba(45, 45, 68, 0.5);
            border: 1px solid #2d2d44;
            border-radius: 8px;
            cursor: pointer;
            color: #e0e0e0;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
        }

        .action-btn:hover {
            background: rgba(45, 45, 68, 0.8);
            border-color: #22c55e;
        }

        .last-updated {
            font-size: 0.8rem;
            color: #9ca3af;
        }

        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
            }

            .header {
                flex-direction: column;
                gap: 12px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1><span>üéØ</span> PM Monitor - Tiny Seed OS</h1>
        <div style="display: flex; align-items: center; gap: 16px;">
            <span class="last-updated" id="lastUpdated">Loading...</span>
            <div class="status-badge">
                <div class="status-dot"></div>
                <span>Live Monitoring</span>
            </div>
            <button class="refresh-btn" onclick="refreshAll()">
                <span id="refreshIcon">üîÑ</span> Refresh
            </button>
        </div>
    </div>

    <div class="container">
        <div class="tabs">
            <div class="tab active" onclick="switchTab('overview')">üìä Overview</div>
            <div class="tab" onclick="switchTab('components')">üß© Components</div>
            <div class="tab" onclick="switchTab('claudes')">ü§ñ Claude Sessions</div>
            <div class="tab" onclick="switchTab('api')">‚ö° API Health</div>
            <div class="tab" onclick="switchTab('issues')">‚ö†Ô∏è Issues</div>
            <div class="tab" onclick="switchTab('manifest')">üìã Full Manifest</div>
        </div>

        <!-- OVERVIEW TAB -->
        <div id="overview" class="tab-content active">
            <div class="grid">
                <!-- System Health Card -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-title"><span>üíö</span> System Health</span>
                    </div>
                    <div class="card-body">
                        <div class="stat-row">
                            <span class="stat-label">API Status</span>
                            <span class="stat-value success" id="apiStatus">Checking...</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Working Components</span>
                            <span class="stat-value success" id="workingCount">-</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Partial/Broken</span>
                            <span class="stat-value warning" id="brokenCount">-</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Disconnected Backend</span>
                            <span class="stat-value error" id="disconnectedCount">-</span>
                        </div>
                    </div>
                </div>

                <!-- Quick Stats -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-title"><span>üìà</span> System Inventory</span>
                    </div>
                    <div class="card-body">
                        <div class="stat-row">
                            <span class="stat-label">Apps Script Files</span>
                            <span class="stat-value info">29</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">HTML Files (Desktop)</span>
                            <span class="stat-value info">17</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">HTML Files (Web App)</span>
                            <span class="stat-value info">32</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">API Endpoints</span>
                            <span class="stat-value info">230+</span>
                        </div>
                    </div>
                </div>

                <!-- Critical Issues -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-title"><span>üö®</span> Critical Issues</span>
                    </div>
                    <div class="card-body">
                        <div class="issue-list" id="criticalIssues">
                            <div class="issue-item">
                                <div class="issue-title">Chief of Staff Backend Disconnected</div>
                                <div class="issue-description">12 backend modules built but not connected to frontend</div>
                            </div>
                            <div class="issue-item warning">
                                <div class="issue-title">4 Morning Brief Generators</div>
                                <div class="issue-description">Duplicate systems causing confusion - needs consolidation</div>
                            </div>
                            <div class="issue-item warning">
                                <div class="issue-title">Demo Data Fallbacks</div>
                                <div class="issue-description">10+ files show fake data when API fails</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-title"><span>üìù</span> Recent Activity</span>
                    </div>
                    <div class="card-body">
                        <div id="recentActivity">
                            <div class="activity-item">
                                <div class="activity-icon">üìÑ</div>
                                <div class="activity-content">
                                    <div class="activity-title">SYSTEM_MANIFEST.md created</div>
                                    <div class="activity-meta">PM_Architect ‚Ä¢ Just now</div>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon">üìÑ</div>
                                <div class="activity-content">
                                    <div class="activity-title">CLAUDE_ROLES.md created</div>
                                    <div class="activity-meta">PM_Architect ‚Ä¢ Just now</div>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon">üöÄ</div>
                                <div class="activity-content">
                                    <div class="activity-title">Chef invitation system deployed</div>
                                    <div class="activity-meta">Backend_Claude ‚Ä¢ Today</div>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon">‚ú®</div>
                                <div class="activity-content">
                                    <div class="activity-title">chef-order.html pushed</div>
                                    <div class="activity-meta">Mobile_Claude ‚Ä¢ Today</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="card full-width">
                <div class="card-header">
                    <span class="card-title"><span>‚ö°</span> Quick Actions</span>
                </div>
                <div class="card-body">
                    <div class="quick-actions">
                        <button class="action-btn" onclick="testAPI()">üîå Test API Connection</button>
                        <button class="action-btn" onclick="openManifest()">üìã View Full Manifest</button>
                        <button class="action-btn" onclick="openRoles()">ü§ñ View Claude Roles</button>
                        <button class="action-btn" onclick="checkEndpoints()">üì° Check All Endpoints</button>
                        <button class="action-btn" onclick="viewDeployments()">üöÄ Recent Deployments</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- COMPONENTS TAB -->
        <div id="components" class="tab-content">
            <div class="grid">
                <!-- Working Components -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-title"><span>‚úÖ</span> Working Components</span>
                    </div>
                    <div class="card-body">
                        <div class="component-list" id="workingComponents">
                            <div class="component-item">
                                <div class="component-name">
                                    <span>üë∑</span>
                                    <div>
                                        <div>Employee App</div>
                                        <code>employee.html</code>
                                    </div>
                                </div>
                                <span class="status-indicator status-working">Working</span>
                            </div>
                            <div class="component-item">
                                <div class="component-name">
                                    <span>üöó</span>
                                    <div>
                                        <div>Driver App</div>
                                        <code>web_app/driver.html</code>
                                    </div>
                                </div>
                                <span class="status-indicator status-working">Working</span>
                            </div>
                            <div class="component-item">
                                <div class="component-name">
                                    <span>üë®‚Äçüç≥</span>
                                    <div>
                                        <div>Chef Ordering</div>
                                        <code>web_app/chef-order.html</code>
                                    </div>
                                </div>
                                <span class="status-indicator status-working">Working</span>
                            </div>
                            <div class="component-item">
                                <div class="component-name">
                                    <span>üì¶</span>
                                    <div>
                                        <div>Wholesale Portal</div>
                                        <code>web_app/wholesale.html</code>
                                    </div>
                                </div>
                                <span class="status-indicator status-working">Working</span>
                            </div>
                            <div class="component-item">
                                <div class="component-name">
                                    <span>üìÖ</span>
                                    <div>
                                        <div>Crop Planning</div>
                                        <code>planning.html</code>
                                    </div>
                                </div>
                                <span class="status-indicator status-working">Working</span>
                            </div>
                            <div class="component-item">
                                <div class="component-name">
                                    <span>üå±</span>
                                    <div>
                                        <div>Greenhouse</div>
                                        <code>greenhouse.html</code>
                                    </div>
                                </div>
                                <span class="status-indicator status-working">Working</span>
                            </div>
                            <div class="component-item">
                                <div class="component-name">
                                    <span>üí∞</span>
                                    <div>
                                        <div>Financial Dashboard</div>
                                        <code>web_app/financial-dashboard.html</code>
                                    </div>
                                </div>
                                <span class="status-indicator status-working">Working</span>
                            </div>
                            <div class="component-item">
                                <div class="component-name">
                                    <span>üë§</span>
                                    <div>
                                        <div>Admin Panel</div>
                                        <code>web_app/admin.html</code>
                                    </div>
                                </div>
                                <span class="status-indicator status-working">Working</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Disconnected Backend -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-title"><span>üîå</span> Disconnected Backend Features</span>
                    </div>
                    <div class="card-body">
                        <div class="component-list" id="disconnectedComponents">
                            <div class="component-item">
                                <div class="component-name">
                                    <span>üé§</span>
                                    <div>
                                        <div>Voice Commands</div>
                                        <code>ChiefOfStaff_Voice.js</code>
                                    </div>
                                </div>
                                <span class="status-indicator status-disconnected">Disconnected</span>
                            </div>
                            <div class="component-item">
                                <div class="component-name">
                                    <span>üß†</span>
                                    <div>
                                        <div>Memory System</div>
                                        <code>ChiefOfStaff_Memory.js</code>
                                    </div>
                                </div>
                                <span class="status-indicator status-disconnected">Disconnected</span>
                            </div>
                            <div class="component-item">
                                <div class="component-name">
                                    <span>ü§ñ</span>
                                    <div>
                                        <div>Autonomy Settings</div>
                                        <code>ChiefOfStaff_Autonomy.js</code>
                                    </div>
                                </div>
                                <span class="status-indicator status-disconnected">Disconnected</span>
                            </div>
                            <div class="component-item">
                                <div class="component-name">
                                    <span>üîî</span>
                                    <div>
                                        <div>Proactive Alerts</div>
                                        <code>ChiefOfStaff_ProactiveIntel.js</code>
                                    </div>
                                </div>
                                <span class="status-indicator status-disconnected">Disconnected</span>
                            </div>
                            <div class="component-item">
                                <div class="component-name">
                                    <span>‚úâÔ∏è</span>
                                    <div>
                                        <div>Email Style Mimicry</div>
                                        <code>ChiefOfStaff_StyleMimicry.js</code>
                                    </div>
                                </div>
                                <span class="status-indicator status-disconnected">Disconnected</span>
                            </div>
                            <div class="component-item">
                                <div class="component-name">
                                    <span>üìÜ</span>
                                    <div>
                                        <div>Calendar AI</div>
                                        <code>ChiefOfStaff_Calendar.js</code>
                                    </div>
                                </div>
                                <span class="status-indicator status-disconnected">Disconnected</span>
                            </div>
                            <div class="component-item">
                                <div class="component-name">
                                    <span>üìä</span>
                                    <div>
                                        <div>Predictive Analytics</div>
                                        <code>ChiefOfStaff_Predictive.js</code>
                                    </div>
                                </div>
                                <span class="status-indicator status-disconnected">Disconnected</span>
                            </div>
                            <div class="component-item">
                                <div class="component-name">
                                    <span>üì±</span>
                                    <div>
                                        <div>SMS Intelligence</div>
                                        <code>ChiefOfStaff_SMS.js</code>
                                    </div>
                                </div>
                                <span class="status-indicator status-disconnected">Disconnected</span>
                            </div>
                            <div class="component-item">
                                <div class="component-name">
                                    <span>üìÅ</span>
                                    <div>
                                        <div>File Organization</div>
                                        <code>ChiefOfStaff_FileOrg.js</code>
                                    </div>
                                </div>
                                <span class="status-indicator status-disconnected">Disconnected</span>
                            </div>
                            <div class="component-item">
                                <div class="component-name">
                                    <span>üìß</span>
                                    <div>
                                        <div>Email Workflows</div>
                                        <code>EmailWorkflowEngine.js</code>
                                    </div>
                                </div>
                                <span class="status-indicator status-disconnected">Disconnected</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- CLAUDE SESSIONS TAB -->
        <div id="claudes" class="tab-content">
            <div class="grid">
                <div class="card full-width">
                    <div class="card-header">
                        <span class="card-title"><span>ü§ñ</span> Active Claude Sessions</span>
                    </div>
                    <div class="card-body">
                        <div id="claudeSessions">
                            <div class="claude-session">
                                <div class="claude-avatar">üéØ</div>
                                <div class="claude-info">
                                    <div class="claude-name">PM_Architect</div>
                                    <div class="claude-task">System coordination, building PM Monitor</div>
                                </div>
                                <span class="status-indicator status-working">Active</span>
                            </div>
                            <div class="claude-session">
                                <div class="claude-avatar">‚öôÔ∏è</div>
                                <div class="claude-info">
                                    <div class="claude-name">Backend_Claude</div>
                                    <div class="claude-task">API endpoints, Apps Script development</div>
                                </div>
                                <span class="status-indicator status-partial">Standby</span>
                            </div>
                            <div class="claude-session">
                                <div class="claude-avatar">üñ•Ô∏è</div>
                                <div class="claude-info">
                                    <div class="claude-name">Desktop_Claude</div>
                                    <div class="claude-task">Desktop HTML files, dashboards</div>
                                </div>
                                <span class="status-indicator status-partial">Standby</span>
                            </div>
                            <div class="claude-session">
                                <div class="claude-avatar">üì±</div>
                                <div class="claude-info">
                                    <div class="claude-name">Mobile_Claude</div>
                                    <div class="claude-task">Mobile apps, PWA features</div>
                                </div>
                                <span class="status-indicator status-partial">Standby</span>
                            </div>
                            <div class="claude-session">
                                <div class="claude-avatar">üé®</div>
                                <div class="claude-info">
                                    <div class="claude-name">UX_Design_Claude</div>
                                    <div class="claude-task">Design system, UI consistency</div>
                                </div>
                                <span class="status-indicator status-partial">Standby</span>
                            </div>
                            <div class="claude-session">
                                <div class="claude-avatar">üíº</div>
                                <div class="claude-info">
                                    <div class="claude-name">Sales_Claude</div>
                                    <div class="claude-task">Sales dashboards, CRM</div>
                                </div>
                                <span class="status-indicator status-partial">Standby</span>
                            </div>
                            <div class="claude-session">
                                <div class="claude-avatar">üîê</div>
                                <div class="claude-info">
                                    <div class="claude-name">Security_Claude</div>
                                    <div class="claude-task">Auth, permissions, data protection</div>
                                </div>
                                <span class="status-indicator status-partial">Standby</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Claude Session Folders -->
                <div class="card full-width">
                    <div class="card-header">
                        <span class="card-title"><span>üìÅ</span> Session Folders</span>
                    </div>
                    <div class="card-body">
                        <table class="manifest-table">
                            <thead>
                                <tr>
                                    <th>Folder</th>
                                    <th>Purpose</th>
                                    <th>INBOX</th>
                                    <th>OUTBOX</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>pm_architect</code></td>
                                    <td>Project management, coordination</td>
                                    <td>‚úÖ</td>
                                    <td>‚úÖ</td>
                                </tr>
                                <tr>
                                    <td><code>backend</code></td>
                                    <td>Apps Script development</td>
                                    <td>‚úÖ</td>
                                    <td>‚úÖ</td>
                                </tr>
                                <tr>
                                    <td><code>ux_design</code></td>
                                    <td>Frontend UI/UX</td>
                                    <td>‚úÖ</td>
                                    <td>‚úÖ</td>
                                </tr>
                                <tr>
                                    <td><code>mobile_employee</code></td>
                                    <td>Mobile app development</td>
                                    <td>‚úÖ</td>
                                    <td>‚úÖ</td>
                                </tr>
                                <tr>
                                    <td><code>sales_crm</code></td>
                                    <td>Sales and CRM</td>
                                    <td>‚úÖ</td>
                                    <td>‚úÖ</td>
                                </tr>
                                <tr>
                                    <td><code>social_media</code></td>
                                    <td>Marketing and social</td>
                                    <td>‚úÖ</td>
                                    <td>‚úÖ</td>
                                </tr>
                                <tr>
                                    <td><code>field_operations</code></td>
                                    <td>Farm operations</td>
                                    <td>‚úÖ</td>
                                    <td>‚úÖ</td>
                                </tr>
                                <tr>
                                    <td><code>financial</code></td>
                                    <td>Financial systems</td>
                                    <td>‚úÖ</td>
                                    <td>‚úÖ</td>
                                </tr>
                                <tr>
                                    <td><code>food_safety</code></td>
                                    <td>Compliance</td>
                                    <td>‚úÖ</td>
                                    <td>‚úÖ</td>
                                </tr>
                                <tr>
                                    <td><code>security</code></td>
                                    <td>Security and auth</td>
                                    <td>‚úÖ</td>
                                    <td>‚úÖ</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- API HEALTH TAB -->
        <div id="api" class="tab-content">
            <div class="card full-width">
                <div class="card-header">
                    <span class="card-title"><span>‚ö°</span> API Health Check</span>
                    <button class="refresh-btn" onclick="checkAllEndpoints()">Run Health Check</button>
                </div>
                <div class="card-body">
                    <div id="apiHealthResults">
                        <div class="api-check">
                            <span class="api-icon">üü¢</span>
                            <div class="api-info">
                                <div class="api-name">Main API Endpoint</div>
                                <div class="api-status" id="mainApiStatus">Not checked</div>
                            </div>
                            <span class="latency" id="mainApiLatency">-</span>
                        </div>
                        <div class="api-check">
                            <span class="api-icon">üü°</span>
                            <div class="api-info">
                                <div class="api-name">getPlanning</div>
                                <div class="api-status">Planning data endpoint</div>
                            </div>
                            <span class="latency">-</span>
                        </div>
                        <div class="api-check">
                            <span class="api-icon">üü°</span>
                            <div class="api-info">
                                <div class="api-name">getCrops</div>
                                <div class="api-status">Crop reference data</div>
                            </div>
                            <span class="latency">-</span>
                        </div>
                        <div class="api-check">
                            <span class="api-icon">üü°</span>
                            <div class="api-info">
                                <div class="api-name">getRealtimeAvailability</div>
                                <div class="api-status">Chef ordering availability</div>
                            </div>
                            <span class="latency">-</span>
                        </div>
                        <div class="api-check">
                            <span class="api-icon">üü°</span>
                            <div class="api-info">
                                <div class="api-name">getMorningBrief</div>
                                <div class="api-status">Daily brief generation</div>
                            </div>
                            <span class="latency">-</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ISSUES TAB -->
        <div id="issues" class="tab-content">
            <div class="grid">
                <div class="card full-width">
                    <div class="card-header">
                        <span class="card-title"><span>üö®</span> All Known Issues</span>
                    </div>
                    <div class="card-body">
                        <div class="issue-list">
                            <div class="issue-item">
                                <div class="issue-title">Chief of Staff Backend Disconnected</div>
                                <div class="issue-description">12 backend modules (Voice, Memory, Autonomy, etc.) are built but have no frontend connection. The chief-of-staff.html page has empty/placeholder tabs.</div>
                            </div>
                            <div class="issue-item">
                                <div class="issue-title">4 Morning Brief Generators</div>
                                <div class="issue-description">getMorningBrief() exists in 4 different locations: MERGED TOTAL.js, MorningBriefGenerator.js, ChiefOfStaff_Master.js, FarmIntelligence.js. These compete and cause confusion.</div>
                            </div>
                            <div class="issue-item">
                                <div class="issue-title">2 Approval Systems</div>
                                <div class="issue-description">EmailWorkflowEngine.js has approval workflows, and chief-of-staff.html has manual approval UI. These don't sync.</div>
                            </div>
                            <div class="issue-item warning">
                                <div class="issue-title">Demo Data Fallbacks</div>
                                <div class="issue-description">10+ files show fake/sample data when API fails instead of showing error. Files: seed_inventory_PRODUCTION.html, smart_learning_DTM.html, and others.</div>
                            </div>
                            <div class="issue-item warning">
                                <div class="issue-title">Duplicate Sheet Names</div>
                                <div class="issue-description">Some concepts have multiple sheet names: EMPLOYEES vs USERS, HARVEST_LOG vs HARVESTS, REF_Fields vs FIELD_MAP. Code has fallback logic.</div>
                            </div>
                            <div class="issue-item warning">
                                <div class="issue-title">Hardcoded API Keys in Code</div>
                                <div class="issue-description">Twilio AUTH_TOKEN, Google Maps API_KEY, and Ayrshare API_KEY are hardcoded in MERGED TOTAL.js instead of using PropertiesService.</div>
                            </div>
                            <div class="issue-item warning">
                                <div class="issue-title">25 Pages Missing Authentication</div>
                                <div class="issue-description">Many pages don't check for valid session. Financial pages are accessible to anyone with the URL.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- MANIFEST TAB -->
        <div id="manifest" class="tab-content">
            <div class="card full-width">
                <div class="card-header">
                    <span class="card-title"><span>üìã</span> Full System Manifest</span>
                    <a href="#" onclick="downloadManifest()" style="color: #22c55e; font-size: 0.9rem;">Download SYSTEM_MANIFEST.md</a>
                </div>
                <div class="card-body">
                    <p style="margin-bottom: 20px; color: #9ca3af;">
                        The complete system manifest is available at: <code>claude_sessions/pm_architect/SYSTEM_MANIFEST.md</code>
                    </p>

                    <h3 style="margin-bottom: 12px; font-size: 1rem;">Apps Script Files (29 total)</h3>
                    <table class="manifest-table">
                        <thead>
                            <tr>
                                <th>File</th>
                                <th>Purpose</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>MERGED TOTAL.js</code></td>
                                <td>Central API router (230+ endpoints)</td>
                                <td><span class="status-indicator status-working">Active</span></td>
                            </tr>
                            <tr>
                                <td><code>CropRotation.js</code></td>
                                <td>Field planning, bed management</td>
                                <td><span class="status-indicator status-working">Active</span></td>
                            </tr>
                            <tr>
                                <td><code>ChefCommunications.js</code></td>
                                <td>Chef invites, magic links</td>
                                <td><span class="status-indicator status-working">Active</span></td>
                            </tr>
                            <tr>
                                <td><code>SmartAvailability.js</code></td>
                                <td>Real-time inventory</td>
                                <td><span class="status-indicator status-working">Active</span></td>
                            </tr>
                            <tr>
                                <td><code>ChiefOfStaff_Voice.js</code></td>
                                <td>Voice command interface</td>
                                <td><span class="status-indicator status-disconnected">Not Connected</span></td>
                            </tr>
                            <tr>
                                <td><code>ChiefOfStaff_Memory.js</code></td>
                                <td>Persistent memory system</td>
                                <td><span class="status-indicator status-disconnected">Not Connected</span></td>
                            </tr>
                            <tr>
                                <td><code>ChiefOfStaff_Autonomy.js</code></td>
                                <td>Delegation settings</td>
                                <td><span class="status-indicator status-disconnected">Not Connected</span></td>
                            </tr>
                            <tr>
                                <td><code>EmailWorkflowEngine.js</code></td>
                                <td>Email triage and approvals</td>
                                <td><span class="status-indicator status-disconnected">Not Connected</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize API
        const api = new TinySeedAPI();

        // Tab switching
        function switchTab(tabId) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));

            document.querySelector(`.tab[onclick="switchTab('${tabId}')"]`).classList.add('active');
            document.getElementById(tabId).classList.add('active');
        }

        // Update last updated time
        function updateTimestamp() {
            document.getElementById('lastUpdated').textContent = 'Last updated: ' + new Date().toLocaleTimeString();
        }

        // Test API connection
        async function testAPI() {
            const startTime = Date.now();
            try {
                const result = await api.get('testConnection');
                const latency = Date.now() - startTime;

                document.getElementById('apiStatus').textContent = 'Connected';
                document.getElementById('apiStatus').className = 'stat-value success';
                document.getElementById('mainApiStatus').textContent = 'Connected - API responding normally';
                document.getElementById('mainApiLatency').textContent = latency + 'ms';

                alert('API Connected! Latency: ' + latency + 'ms');
            } catch (error) {
                document.getElementById('apiStatus').textContent = 'Error';
                document.getElementById('apiStatus').className = 'stat-value error';
                document.getElementById('mainApiStatus').textContent = 'Error: ' + error.message;

                alert('API Error: ' + error.message);
            }
        }

        // Refresh all data
        async function refreshAll() {
            const btn = document.querySelector('.refresh-btn');
            const icon = document.getElementById('refreshIcon');

            btn.classList.add('loading');
            icon.style.animation = 'spin 1s linear infinite';

            await testAPI();
            updateTimestamp();
            updateCounts();

            btn.classList.remove('loading');
            icon.style.animation = '';
        }

        // Update stat counts
        function updateCounts() {
            document.getElementById('workingCount').textContent = '12 components';
            document.getElementById('brokenCount').textContent = '3 components';
            document.getElementById('disconnectedCount').textContent = '12 modules';
        }

        // Open manifest file
        function openManifest() {
            alert('Manifest location: claude_sessions/pm_architect/SYSTEM_MANIFEST.md');
        }

        // Open roles file
        function openRoles() {
            alert('Roles location: claude_sessions/pm_architect/CLAUDE_ROLES.md');
        }

        // Check all endpoints
        async function checkAllEndpoints() {
            alert('Endpoint health check would test all 230+ API endpoints. This feature needs backend implementation for bulk testing.');
        }

        // View recent deployments
        function viewDeployments() {
            alert('Recent deployments:\n\n‚Ä¢ 2026-01-22: Chef invitation system (Backend)\n‚Ä¢ 2026-01-22: chef-order.html (Mobile)\n‚Ä¢ 2026-01-22: wholesale.html updates (Desktop)');
        }

        // Download manifest
        function downloadManifest() {
            alert('Download: claude_sessions/pm_architect/SYSTEM_MANIFEST.md');
        }

        // Add spin animation
        const style = document.createElement('style');
        style.textContent = '@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }';
        document.head.appendChild(style);

        // Initialize on load
        document.addEventListener('DOMContentLoaded', () => {
            updateTimestamp();
            updateCounts();
            testAPI();
        });
    </script>
</body>
</html>
